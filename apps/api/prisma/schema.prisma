generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id                  String               @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  email               String               @unique
  firstName           String?
  lastName            String?
  stripeCustomerId    String?              @unique
  emailVerifiedAt     DateTime?
  createdAt           DateTime?            @default(now())
  stripeSubscriptions StripeSubscription[]
}

model StripeSubscription {
  id                String    @id
  status            String
  stripeCustomerId  String
  currency          String    @default("usd")
  cancelAtPeriodEnd Boolean   @default(false)
  productId         String
  planId            String
  interval          String
  intervalCount     Int
  startDate         DateTime
  endDate           DateTime?
  cancelAtDate      DateTime?
  canceledAtDate    DateTime?
  trialStartDate    DateTime?
  trialEndDate      DateTime?
  metadata          Json?
  user              User      @relation(fields: [stripeCustomerId], references: [stripeCustomerId], onDelete: Cascade)
  createdAt         DateTime  @default(now())
}

model StripeEvent {
  stripeEventId String   @id
  type          String
  payload       Json
  createdAt     DateTime @default(now())
  updatedAt     DateTime @updatedAt
}
